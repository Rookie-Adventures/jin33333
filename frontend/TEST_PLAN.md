# 前端测试计划

## 测试架构

按照前端规范，测试文件应与源文件放在同一目录下：

```
frontend/src/
├── components/        # 组件目录
│   ├── common/       
│   │   └── Button/
│   │       ├── Button.tsx
│   │       ├── Button.test.tsx      # 组件单元测试
│   │       └── Button.spec.tsx      # 组件集成测试
│   └── business/     
├── utils/            
│   ├── http/
│   │   ├── client.ts
│   │   └── client.test.ts          # 工具函数测试
│   └── security/
│       ├── auth.ts
│       └── auth.test.ts            # 认证工具测试
├── hooks/            
│   └── auth/
│       ├── useAuth.ts
│       └── useAuth.test.ts         # Hook 测试
├── store/
│   ├── slices/
│   │   ├── auth.ts
│   │   └── auth.test.ts           # Redux slice 测试
│   └── index.ts
└── e2e/              # 端到端测试（唯一独立的测试目录）
    └── flows/
        ├── auth.e2e.ts
        └── admin.e2e.ts
```

## 测试优先级和进度

### 1. 基础设施测试 [ ]

#### 1.1 HTTP 客户端 [ ]
- [ ] 基本请求测试
- [ ] 错误处理测试
- [ ] 重试机制测试
- [ ] 请求拦截器测试
- [ ] 响应拦截器测试
- [ ] 缓存机制测试

#### 1.2 认证管理器 [ ]
- [ ] 登录/登出测试
- [ ] Token 管理测试
- [ ] 会话管理测试
- [ ] 权限检查测试
- [ ] 自动刷新 Token 测试

#### 1.3 Store 配置 [ ]
- [ ] Redux Store 初始化测试
- [ ] Action Creators 测试
- [ ] Reducers 测试
- [ ] 中间件测试
- [ ] 状态持久化测试

#### 1.4 路由配置 [ ]
- [ ] 路由守卫测试
- [ ] 路由参数测试
- [ ] 路由跳转测试
- [ ] 404 处理测试

### 2. 功能测试 [ ]

#### 2.1 用户认证功能 [ ]
- [ ] 登录表单验证
- [ ] 注册流程测试
- [ ] 密码重置测试
- [ ] 记住登录测试

#### 2.2 权限控制 [ ]
- [ ] 角色权限测试
- [ ] 页面访问控制测试
- [ ] 功能权限测试
- [ ] 动态权限测试

#### 2.3 数据管理 [ ]
- [ ] 数据加载测试
- [ ] 数据缓存测试
- [ ] 数据更新测试
- [ ] 数据同步测试

### 3. 集成测试 [ ]

#### 3.1 API 集成 [ ]
- [ ] 认证 API 测试
- [ ] 业务 API 测试
- [ ] 错误处理测试
- [ ] 网络异常测试

#### 3.2 页面集成 [ ]
- [ ] 页面渲染测试
- [ ] 组件交互测试
- [ ] 状态更新测试
- [ ] 性能测试

## 测试覆盖率要求

- 分支覆盖率：80%
- 函数覆盖率：80%
- 行覆盖率：80%
- 语句覆盖率：80%

## 测试工具

- 测试框架：Vitest
- UI 测试：@testing-library/react
- Mock 服务：MSW (Mock Service Worker)
- 覆盖率工具：@vitest/coverage-v8

## 运行测试

```bash
# 运行所有测试
npm test

# 监视模式
npm run test:watch

# 生成覆盖率报告
npm run test:coverage

# UI 模式运行测试
npm run test:ui
```

## 注意事项

1. 每个测试文件应该遵循以下命名规范：
   - 单元测试：`*.test.ts`
   - 集成测试：`*.spec.ts`
   - E2E测试：`*.e2e.ts`

2. 测试文件应与被测试的文件放在同一目录下

3. 每个测试用例应该是独立的，不依赖于其他测试的状态

4. 使用 `beforeEach` 和 `afterEach` 确保测试环境的清洁

5. 合理使用 Mock，避免不必要的外部依赖

## 进度追踪

- [ ] 基础设施测试 (0/4)
- [ ] 功能测试 (0/3)
- [ ] 集成测试 (0/2)

总体进度：0/9 (0%) 